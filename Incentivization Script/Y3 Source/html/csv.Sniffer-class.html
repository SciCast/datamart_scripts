<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>csv.Sniffer</title>
    <link rel="stylesheet" href="epydoc.css" type="text/css"/>
    <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
    <tr valign="middle">

        <!-- Tree link -->
        <th>&nbsp;&nbsp;&nbsp;<a
                href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

        <!-- Index link -->
        <th>&nbsp;&nbsp;&nbsp;<a
                href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

        <!-- Help link -->
        <th>&nbsp;&nbsp;&nbsp;<a
                href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

        <th class="navbar" width="100%"></th>
    </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
    <tr valign="top">
        <td width="100%">
      <span class="breadcrumbs">
        csv ::
        Sniffer ::
        Class&nbsp;Sniffer
      </span>
        </td>
        <td>
            <table cellpadding="0" cellspacing="0">
                <!-- hide/show private -->
                <tr>
                    <td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
                                                                onclick="toggle_private();">hide&nbsp;private</a>]</span>
                    </td>
                </tr>
                <tr>
                    <td align="right"><span class="options"
                            >[<a href="frames.html" target="_top">frames</a
                            >]&nbsp;|&nbsp;<a href="csv.Sniffer-class.html"
                                              target="_top">no&nbsp;frames</a>]</span></td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Sniffer</h1>

<p class="nomargin-top"><span class="codelink"><a href="csv-pysrc.html#Sniffer">source&nbsp;code</a></span></p>

<p>&quot;Sniffs&quot; the format of a CSV file (i.e. delimiter,
    quotechar) Returns a Dialect object.</p>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
    <tr bgcolor="#70b0f0" class="table-header">
        <td colspan="2" class="table-header">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr valign="top">
                    <td align="left"><span class="table-header">Instance Methods</span></td>
                    <td align="right" valign="top"
                            ><span class="options">[<a href="#section-InstanceMethods"
                                                       class="privatelink" onclick="toggle_private();"
                            >hide private</a>]</span></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td width="15%" align="right" valign="top" class="summary">
            <span class="summary-type">&nbsp;</span>
        </td>
        <td class="summary">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span
                            class="summary-sig-arg">self</span>)</span></td>
                    <td align="right" valign="top">
                        <span class="codelink"><a href="csv-pysrc.html#Sniffer.__init__">source&nbsp;code</a></span>

                    </td>
                </tr>
            </table>

        </td>
    </tr>
    <tr class="private">
        <td width="15%" align="right" valign="top" class="summary">
            <span class="summary-type">&nbsp;</span>
        </td>
        <td class="summary">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td><span class="summary-sig"><a href="csv.Sniffer-class.html#_guess_delimiter"
                                                     class="summary-sig-name"
                                                     onclick="show_private();">_guess_delimiter</a>(<span
                            class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">delimiters</span>)</span><br/>
                        The delimiter /should/ occur the same number of times on
                        each row.
                    </td>
                    <td align="right" valign="top">
                        <span class="codelink"><a
                                href="csv-pysrc.html#Sniffer._guess_delimiter">source&nbsp;code</a></span>

                    </td>
                </tr>
            </table>

        </td>
    </tr>
    <tr class="private">
        <td width="15%" align="right" valign="top" class="summary">
            <span class="summary-type">&nbsp;</span>
        </td>
        <td class="summary">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td><span class="summary-sig"><a href="csv.Sniffer-class.html#_guess_quote_and_delimiter"
                                                     class="summary-sig-name" onclick="show_private();">_guess_quote_and_delimiter</a>(<span
                            class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">delimiters</span>)</span><br/>
                        Looks for text enclosed between two identical quotes
                        (the probable quotechar) which are preceded and followed
                        by the same character (the probable delimiter).
                    </td>
                    <td align="right" valign="top">
                        <span class="codelink"><a href="csv-pysrc.html#Sniffer._guess_quote_and_delimiter">source&nbsp;code</a></span>

                    </td>
                </tr>
            </table>

        </td>
    </tr>
    <tr>
        <td width="15%" align="right" valign="top" class="summary">
            <span class="summary-type">&nbsp;</span>
        </td>
        <td class="summary">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td><span class="summary-sig"><a name="has_header"></a><span
                            class="summary-sig-name">has_header</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">sample</span>)</span></td>
                    <td align="right" valign="top">
                        <span class="codelink"><a href="csv-pysrc.html#Sniffer.has_header">source&nbsp;code</a></span>

                    </td>
                </tr>
            </table>

        </td>
    </tr>
    <tr>
        <td width="15%" align="right" valign="top" class="summary">
            <span class="summary-type">&nbsp;</span>
        </td>
        <td class="summary">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                    <td><span class="summary-sig"><a name="sniff"></a><span class="summary-sig-name">sniff</span>(<span
                            class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">sample</span>,
        <span class="summary-sig-arg">delimiters</span>=<span class="summary-sig-default">None</span>)</span><br/>
                        Returns a dialect (or None) corresponding to the sample
                    </td>
                    <td align="right" valign="top">
                        <span class="codelink"><a href="csv-pysrc.html#Sniffer.sniff">source&nbsp;code</a></span>

                    </td>
                </tr>
            </table>

        </td>
    </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
    <tr bgcolor="#70b0f0" class="table-header">
        <td colspan="2" class="table-header">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr valign="top">
                    <td align="left"><span class="table-header">Method Details</span></td>
                    <td align="right" valign="top"
                            ><span class="options">[<a href="#section-MethodDetails"
                                                       class="privatelink" onclick="toggle_private();"
                            >hide private</a>]</span></td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<a name="_guess_delimiter"></a>

<div class="private">
    <table class="details" border="1" cellpadding="3"
           cellspacing="0" width="100%" bgcolor="white">
        <tr>
            <td>
                <table width="100%" cellpadding="0" cellspacing="0" border="0">
                    <tr valign="top">
                        <td>
                            <h3 class="epydoc"><span class="sig"><span class="sig-name">_guess_delimiter</span>(<span
                                    class="sig-arg">self</span>,
        <span class="sig-arg">data</span>,
        <span class="sig-arg">delimiters</span>)</span>
                            </h3>
                        </td>
                        <td align="right" valign="top"
                                ><span class="codelink"><a href="csv-pysrc.html#Sniffer._guess_delimiter">source&nbsp;code</a></span>&nbsp;
                        </td>
                    </tr>
                </table>
  
  <pre class="literalblock">

The delimiter /should/ occur the same number of times on
each row. However, due to malformed data, it may not. We don't want
an all or nothing approach, so we allow for small variations in this
number.
  1) build a table of the frequency of each character on every line.
  2) build a table of frequencies of this frequency (meta-frequency?),
     e.g.  'x occurred 5 times in 10 rows, 6 times in 1000 rows,
     7 times in 2 rows'
  3) use the mode of the meta-frequency to determine the /expected/
     frequency for that character
  4) find out how often the character actually meets that goal
  5) the character that best meets its goal is the delimiter
For performance reasons, the data is evaluated in chunks, so it can
try and evaluate the smallest portion of the data possible, evaluating
additional chunks as necessary.

</pre>
                <dl class="fields">
                </dl>
            </td>
        </tr>
    </table>
</div>
<a name="_guess_quote_and_delimiter"></a>

<div class="private">
    <table class="details" border="1" cellpadding="3"
           cellspacing="0" width="100%" bgcolor="white">
        <tr>
            <td>
                <table width="100%" cellpadding="0" cellspacing="0" border="0">
                    <tr valign="top">
                        <td>
                            <h3 class="epydoc"><span class="sig"><span
                                    class="sig-name">_guess_quote_and_delimiter</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">data</span>,
        <span class="sig-arg">delimiters</span>)</span>
                            </h3>
                        </td>
                        <td align="right" valign="top"
                                ><span class="codelink"><a href="csv-pysrc.html#Sniffer._guess_quote_and_delimiter">source&nbsp;code</a></span>&nbsp;
                        </td>
                    </tr>
                </table>
  
  <pre class="literalblock">

Looks for text enclosed between two identical quotes
(the probable quotechar) which are preceded and followed
by the same character (the probable delimiter).
For example:
                 ,'some text',
The quote with the most wins, same with the delimiter.
If there is no quotechar the delimiter can't be determined
this way.

</pre>
                <dl class="fields">
                </dl>
            </td>
        </tr>
    </table>
</div>
<br/>
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
    <tr valign="middle">

        <!-- Tree link -->
        <th>&nbsp;&nbsp;&nbsp;<a
                href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

        <!-- Index link -->
        <th>&nbsp;&nbsp;&nbsp;<a
                href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

        <!-- Help link -->
        <th>&nbsp;&nbsp;&nbsp;<a
                href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

        <th class="navbar" width="100%"></th>
    </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
    <tr>
        <td align="left" class="footer">
            Generated by Epydoc 3.0.1 on Wed Mar 26 13:41:40 2014
        </td>
        <td align="right" class="footer">
            <a target="mainFrame" href="http://epydoc.sourceforge.net"
                    >http://epydoc.sourceforge.net</a>
        </td>
    </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->

</script>
</body>
</html>
